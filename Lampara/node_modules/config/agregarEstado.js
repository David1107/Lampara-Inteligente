var mongoose = require('mongoose');
var models = require('config/models');
var estado = models.estado;

exports.agregar = function(animo,fecha) {
	
	var newEstado = new estado({
		animo: animo,
		fecha: fecha
	});

	newEstado.save(function(err){
		if(err)
		{
			console.log(err);
		} else
		{
			console.log("Se agregó un nuevo estado");
		}
	});

	exports.estadoActual = function() {

		var indice = estado..find({animo:1,_id:0}).sort({fecha:-1}).limit(10).exec(function(err){
			if(err)
		{
			console.log(err);
		} else
		{
			console.log("Se encontraron los últimos 10 estados");
		}
		});
		var recientes=[];
        int pos=0;
        while(indice.hasNext())
        {
            recientes[pos]=indice.next().toJSON();
            pos++;
        }
        return recientes;

	}
}